<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script>
      function update(){
        var urlParmas=new URLSearchParams(location.search);
        var $lid=urlParmas.get("lid");
        lid.value=$lid;
        var xhr=new XMLHttpRequest();
          xhr.onreadystatechange=()=>{
            if(xhr.readyState==4&&xhr.status==200){
            var result=xhr.responseText;
            if(result==1){
              alert("修改成功");
              location.href="http://127.0.0.1:8080/produxt_list.html";
            }else alert("修改失败");
          }
        }
        xhr.open("put","/pro/V1/updateProduct",true);
        var formdate="lid="+$lid+"&family_di="+$family_id+"&title="+$title+"&subtitle="+$subtitle+"&price="+$price+ "&promise="+$promise+"&spec="+$spec+ "&lname="+$lname+"&os="+$os+"&memory="+$menory+"&resolution="+$resolution+"&video_card="+$video_card+"&details="+$details;
        xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
        xhr.send(formdate);
      }
      function query(){
        var urlParmas=new URLSearchParams(location.search);
        var $lid=urlParmas.get("lid");
        lid.value=$lid;
        var xhr=new XMLHttpRequest();
        xhr.onreadystatechange=()=>{
          if(xhr.readyState==4&&xhr.status==200){
            var result=xhr.responseText;
            var product=JSON.parse(result)[0];
            family_id.value=product.family_id;
            title.value=product.title;
            subtitle.value=product.$subtitle;
            price.value=product.price;
            promise.value=product.promise;
            spec.value=product.spec;
            lname.value=product.lname;
            os.value=product.os;
            memory.value=product.memory;
            resolution.value=product.resolution;
            video_card.value=product.video_card;
            details.value=product.details;
          }
        }
        xhr.open("put","/pro/V1/queryproduct/"+$lid,true);
        xhr.send();
      }
    </script>
  </head>
  <body>
    <table>
      <tr>
        <td>商品编号</td>
        <td><input type="text" id="lid" readonly></td>
      </tr>
      <tr>
        <td>家族编号</td>
        <td><input type="text" id="family_id"></td>
      </tr>
      <tr>
        <td>主标题</td>
        <td><input type="text" id="title"></td>
      </tr>
      <tr>
        <td>副标题</td>
        <td><input type="text" id="subtitle"></td>
      </tr>
      <tr>
        <td>价格</td>
        <td><input type="text" id="price"></td>
      </tr>
      <tr>
        <td>服务承诺</td>
        <td><input type="text" id="promise"></td>
      </tr>
      <tr>
        <td>规格/颜色</td>
        <td><input type="text" id="spec"></td>
      </tr>
      <tr>
        <td>商品名称</td>
        <td><input type="text" id="lname"></td>
      </tr>
      <tr>
        <td>操作系统</td>
        <td><input type="text" id="os"></td>
      </tr>
      <tr>
        <td>内存容量</td>
        <td><input type="text" id="memory"></td>
      </tr>
      <tr>
        <td>分辨率</td>
        <td><input type="text" id="resolution"></td>
      </tr>
      <tr>
        <td>显卡型号</td>
        <td><input type="text" id="video_card"></td>
      </tr>
      <tr>
        <td>处理器</td>
        <td><input type="text" id="cpu"></td>
      </tr>
      <tr>
        <td>显存容量</td>
        <td><input type="text" id="video_memory"></td>
      </tr>
      <tr>
        <td>所属分类</td>
        <td><input type="text" id="category"></td>
      </tr>
      <tr>
        <td>硬盘容量</td>
        <td><input type="text" id="disk"></td>
      </tr>
      <tr>
		  <td>产品说明</td>
        <td><input type="text" id="details"></td>
      </tr>
    </table>
    <button onclick="update()">修改</button>
  </body>
</html>